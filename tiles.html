<html>

<head>
    <script src="http://maps.kosmosnimki.ru/api/apil.js?key=U92596WMIH" charset="windows-1251"></script>

    <title>Cadastr tiles</title>

    <body>

        <div id="map" style="width: 1000px; height: 800px;"></div>

        <script>

            createFlashMap(document.getElementById("map"), function (map) {

                map.moveTo(84.550781, 62.990967, 3);

                map.setMinMaxZoom(1, 18);
                var tiles = map.addObject();

                tiles.setTiles(function (i, j, z) {
                    //i+= (1<<(z-1));
                    //j = (1 << (z - 1)) - j - 1;

                    var d = Math.pow(2, z);

                    var s = 2 * 20037508.34 / d;

                    var l = i * s,
                        b = j * s,
                        r = l + s,
                        t = b + s;

                    return 'http://maps.rosreestr.ru/arcgis/rest/services/Cadastre/Cadastre/MapServer/export?LAYERS=1%2C2%2C3%2C4%2C5%2C6%2C7%2C8%2C9%2C10%2C11%2C12%2C13%2C14%2C15%2C16%2C17%2C18%2C19&TRANSPARENT=true&ISBASELAYER=false&FORMAT=png&BBOX=' + l + '%2C' + b + '%2C' + r + '%2C' + t + '&SIZE=256%2C256&F=image&BBOXSR=3857&IMAGESR=3857';

                }, 1, 0, 0, 1, 18);

            });

        </script>

    </body>

</html>
